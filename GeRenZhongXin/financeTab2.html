<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/GRZX.css">
    <script src="js/jquery-1.9.1.min.js"></script>
    <script src="js/hotcss.js"></script>
    <title>财务中心</title>
</head>
<body>
    <!-- 头部 -->
    <div class="topNav">
        <a href="javascript:history.go(-1)" class="backBtn"><img src="img/icon_left.png" alt=""></a>
        <h2>财务中心</h2>
        <a href="javascript:;" class="mine"><img src="img/icon_mine.png" alt=""></a>
    </div>
    <!-- 内容 -->
    <div class="containerBox">
        <div class="inner">
            <!-- 切换 -->
            <div class="topTab">
                <a href="javascript:;" class="tabItem ">消费记录</a>
                <a href="javascript:;" class="tabItem action">充值记录</a>
                <a href="javascript:;" class="tabItem">开发票</a>
            </div>
            
            <div class="innerBlock diversion">
                <p>账号余额</p>
                <div class="money">￥<span>2000.00</span></div>
                <a href="javascript:;" class="linkTo">充值</a>
            </div>
            
            <div class="innerBlock extractRecord">

                <div class="tabBlock">
                    <div class="blockItem action">
                        <table class="table1">
                            <thead>
                                <tr>
                                    <th>方式</th>
                                    <th>金额</th>
                                    <th>时间</th>
                                    <th>状态</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>银行转帐</td>
                                    <td>10000.00</td>
                                    <td>2019-06-02</td>
                                    <td>处理中</td>
                                </tr>
                                <tr>
                                    <td>银行转帐</td>
                                    <td>5000.00</td>
                                    <td>2019-06-02</td>
                                    <td>处理中</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
            </div>

            <p class="more">没有更多数据了</p>
            
        </div>
    </div>
    
    <script src="js/GRZX.js"></script>
    <script>
        //懒加载
        var flag = false;
        $(document).on("scroll",function(){
            if($(this).scrollTop() >= ($(".extractRecord").offset().top + $(".extractRecord").outerHeight() * 0.5) ){
                if(flag) return;
                flag = true;
                $(".more").html("正在加载");

                $.ajax({
                    url: "url",
                    type: "get",
                    data: {},
                    success: function (res) {

                        if(res.data.length == 0){
                            $(".more").html("没有更多数据了");
                        }else{
                            flag = false;
                            $(".more").html("下拉显示更多");
                        }

                        $('<tr>'
                            +'<td>银行转帐</td>'
                            +'<td>5000.00</td>'
                            +'<td>2019-06-02</td>'
                            +'<td>处理中</td>'
                        +'</tr>').appendTo(".table1 tbody");
                    }
                });
            }
        });
    </script>
</body>
</html>